 <project name="extinstaller">
 	<target name="extinstaller" >
    <javac target="${target}" source="${srccode}" srcdir="${src}" debug="${debug}" optimize="${optimize}"
      classpathref="classpath"  destdir="${build}"
      includes="com/moneydance/modules/features/extinstaller/**"/>

    <jar destfile="${dist}/extinstaller.mxt">
      <fileset dir="${src}" includes="
             com/moneydance/modules/features/extinstaller/meta_info.dict
             com/moneydance/modules/features/extinstaller/resources/*.gif
              com/moneydance/modules/features/extinstaller/resources/*.jpg
             com/moneydance/modules/features/extinstaller/resources/*.jpeg"/>
      <fileset dir="${build}" includes="com/moneydance/modules/features/extinstaller/**"/>
	      <zipgroupfileset  dir="${lib}" includes="**/mrbutil.jar" />
	      <zipgroupfileset  dir="${lib}" includes="**/org.apache.commons.io.jar" />
    </jar>

    <java newenvironment="true" 
      classpathref="classpath"
      classname="com.moneydance.admin.KeyAdmin">
      <arg value="signextjar"/>
      <arg value="${privkeyfile}"/>
      <arg value="${privkeyid}"/>
      <arg value="extinstaller"/>
      <arg line="${dist}/extinstaller.mxt"/>
    </java>
    <delete file="${dist}/extinstaller.mxt" verbose="true"
failonerror="false" />
    <move file="./s-extinstaller.mxt" tofile="${dist}/extinstaller.mxt"
verbose="true" failonerror="false" />
    <copy file="${dist}/extinstaller.mxt" tofile="${install}/extinstaller.mxt"
verbose="true" failonerror="false" /> 
	<echo>the current time is ${TODAY_UK}</echo>
 </target>
	<target name="cleanextinstaller">
		<delete>
			<fileset dir="${build}">
			    <include name="com/moneydance/modules/features/extinstaller/*.class"/>
			</fileset>
		</delete>
	</target>
</project>