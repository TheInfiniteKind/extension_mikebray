<project name="jasperreports" basedir=".">
	<target name="jasperreports">
		<javac target="${target}" source="${srccode}" srcdir="${src}" debug="${debug}" optimize="${optimize}" classpathref="classpath" destdir="${build}" includes="com/moneydance/modules/features/jasperreports/**" />
		<jar destfile="${dist}/jasperreports.mxt">
			<fileset dir="${src}" includes="
	             com/moneydance/modules/features/jasperreports/meta_info.dict
	             com/moneydance/modules/features/jasperreports/resources/*.gif
	             com/moneydance/modules/features/jasperreports/resources/*.jpg
                 com/moneydance/modules/features/jasperreports/resources/*.png
	             com/moneydance/modules/features/jasperreports/resources/*.jpeg" />
			<fileset dir="${build}" includes="com/moneydance/modules/features/jasperreports/**" />
			<zipgroupfileset dir="${lib}" includes="**/mrbutil.jar" />
			<zipgroupfileset dir="${dist}" includes="**/databeans.jar" />
			<zipgroupfileset dir="${lib}" includes="**/h2-1.4.197.jar" />
		</jar>
		<java newenvironment="true" classpathref="classpath" classname="com.moneydance.admin.KeyAdmin">
			<arg value="signextjar" />
			<arg value="${privkeyfile}" />
			<arg value="${privkeyid}" />
			<arg value="jasperreports" />
			<arg line="${dist}/jasperreports.mxt" />
		</java>
		<delete file="${dist}/jasperreports.mxt" verbose="true" failonerror="false" />
		<move file="./s-jasperreports.mxt" tofile="${dist}/jasperreports.mxt" verbose="true" failonerror="false" />
		<copy file="${dist}/jasperreports.mxt" tofile="${install}/jasperreports.mxt" verbose="true" failonerror="false" />
		<echo>the current time is ${TODAY_UK}</echo>
	</target>
	<target name="cleanjasperreports" >
		<delete>
			<fileset dir="${build}" includes="com/moneydance/modules/features/jasperreports/**" />
		</delete>
	</target>	
	<target name="databeans" >
		<javac target="${target}" source="${srccode}" srcdir="${src}" debug="${debug}" optimize="${optimize}" classpathref="classpath" destdir="${build}" includes="com/moneydance/modules/features/databeans/**" />

		<jar destfile="${dist}/databeans.jar">
			<fileset dir="${build}" includes="com/moneydance/modules/features/databeans/**" />
		</jar>
		<copy file="${dist}/databeans.jar" tofile="..\..\MDJasperServer\lib\databeans.jar" verbose="true" failonerror="true" />
		<echo>the current time is ${TODAY_UK}</echo>
	</target>
	<target name="cleandatabeans">
		<delete>
			<fileset dir="${build}" includes="com/moneydance/modules/features/databeans/**" />
		</delete>
	</target>	
	</project>